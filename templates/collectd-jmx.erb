<Plugin java>
    JVMArg "-verbose:jni"
    JVMArg "-Djava.class.path=/usr/share/collectd/java/collectd-api.jar:/usr/share/collectd/java/generic-jmx.jar"

    LoadPlugin "org.collectd.java.GenericJMX"
    <Plugin "GenericJMX">
        
        #Garbage Collection
        <MBean "garbage_collector">
            ObjectName "java.lang:type=GarbageCollector,*"
            InstancePrefix "gc-"
            InstanceFrom "name"
            <Value>
                Type "total_time_in_ms"
                Table false
                Attribute "CollectionTime"
            </Value>
        </MBean>
        
        #Generic heap/non-heap memory usage
        <MBean "memory">
            ObjectName "java.lang:type=Memory"
            InstancePrefix "memory"
            <Value>
                Type "memory"
                Table true
                Attribute "HeapMemoryUsage"
                InstancePrefix "heap-"
            </Value>
            <Value>
                Type "memory"
                Table true
                Attribute "NonHeapMemoryUsage"
                InstancePrefix "nonheap-"
            </Value>
        </MBean>
        
        #memory usage by memory pool
        <MBean "memory_pool">
            ObjectName "java.lang:type=MemoryPool,*"
            InstancePrefix "memory_pool-"
            InstanceFrom "name"
            <Value>
                Type "memory"
                Table true
                Attribute "Usage"
            </Value>
        </MBean>
        
        <MBean "connections">
            ObjectName "WowzaMediaServerPro:name=Connections"
            InstancePrefix "connections-"
            <Value>
                Type "tcp_connections"
                Table false
                Attribute "current"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "total"
            </Value>
        </MBean>
        
        <MBean "cupertino_connections">
            ObjectName "WowzaMediaServerPro:name=ConnectionsHTTPCupertino"
            InstancePrefix "ConnectionsCupertino-"
            <Value>
                Type "tcp_connections"
                Table false
                Attribute "current"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "total"
            </Value>
        </MBean>
        
        <MBean "sanjose_connections">
            ObjectName "WowzaMediaServerPro:name=ConnectionsHTTPSanJose"
            InstancePrefix "ConnectionsSanJose-"
            <Value>
                Type "tcp_connections"
                Table false
                Attribute "current"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "total"
            </Value>
        </MBean>
        
        <MBean "smooth_connections">
            ObjectName "WowzaMediaServerPro:name=ConnectionsHTTPSmooth"
            InstancePrefix "ConnectionsSmooth-"
            <Value>
                Type "tcp_connections"
                Table false
                Attribute "current"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "total"
            </Value>
        </MBean>
        
        <MBean "rtmp_connections">
            ObjectName "WowzaMediaServerPro:name=ConnectionsRTMP"
            InstancePrefix "ConnectionsRTMP-"
            <Value>
                Type "tcp_connections"
                Table false
                Attribute "current"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "total"
            </Value>
        </MBean>
        
        <MBean "rtp_connections">
            ObjectName "WowzaMediaServerPro:name=ConnectionsRTP"
            InstancePrefix "ConnectionsRTP-"
            <Value>
                Type "tcp_connections"
                Table false
                Attribute "current"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "total"
            </Value>
        </MBean>

        <MBean "ioperformance/input">
            ObjectName "WowzaMediaServerPro:name=IOPerformance"
            InstancePrefix "input-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesInBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesInCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesInCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesInBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance/output">
            ObjectName "WowzaMediaServerPro:name=IOPerformance"
            InstancePrefix "output-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesOutBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesOutCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesOutCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesOutBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance/loss">
            ObjectName "WowzaMediaServerPro:name=IOPerformance"
            InstancePrefix "loss-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesLossBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesLossCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesLossCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesLossBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-cupertino/input">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPCupertino"
            InstancePrefix "input-cupertino-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesInBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesInCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesInCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesInBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-cupertino/output">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPCupertino"
            InstancePrefix "output-cupertino-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesOutBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesOutCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesOutCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesOutBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-cupertino/loss">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPCupertino"
            InstancePrefix "loss-cupertino-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesLossBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesLossCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesLossCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesLossBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-sanjose/input">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPSanJose"
            InstancePrefix "input-sanjose-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesInBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesInCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesInCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesInBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-sanjose/output">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPSanJose"
            InstancePrefix "output-sanjose-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesOutBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesOutCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesOutCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesOutBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-sanjose/loss">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPSanJose"
            InstancePrefix "loss-sanjose-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesLossBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesLossCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesLossCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesLossBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-smooth/input">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPSmooth"
            InstancePrefix "input-smooth-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesInBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesInCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesInCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesInBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-smooth/output">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPSmooth"
            InstancePrefix "output-smooth-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesOutBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesOutCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesOutCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesOutBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-smooth/loss">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceHTTPSmooth"
            InstancePrefix "loss-smooth-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesLossBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesLossCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesLossCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesLossBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-rtmp/input">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceRTMP"
            InstancePrefix "input-rtmp-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesInBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesInCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesInCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesInBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-rtmp/output">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceRTMP"
            InstancePrefix "output-rtmp-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesOutBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesOutCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesOutCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesOutBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-rtmp/loss">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceRTMP"
            InstancePrefix "loss-rtmp-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesLossBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesLossCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesLossCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesLossBytesRate"
            </Value>
        </MBean>

        <MBean "ioperformance-rtp/input">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceRTP"
            InstancePrefix "input-rtp-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesInBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesInCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesInCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesInBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-rtp/output">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceRTP"
            InstancePrefix "output-rtp-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesOutBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesOutCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesOutCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesOutBytesRate"
            </Value>
        </MBean>
        
        <MBean "ioperformance-rtp/loss">
            ObjectName "WowzaMediaServerPro:name=IOPerformanceRTP"
            InstancePrefix "loss-rtp-"
            <Value>
                Type "total_bytes"
                Table false
                Attribute "messagesLossBytes"
            </Value>
            <Value>
                Type "total_requests"
                Table false
                Attribute "messagesLossCount"
            </Value>
            <Value>
                Type "counter"
                Table false
                Attribute "messagesLossCountRate"
            </Value>
            <Value>
                Type "bytes"
                Table false
                Attribute "messagesLossBytesRate"
            </Value>
        </MBean>

        <Connection>
            Host "<%= scope.lookupvar("wowza::jmxhost") %>"
            ServiceURL "<%= scope.lookupvar("wowza::jmxservice_url") %>"
            User "<%= scope.lookupvar("wowza::jmxservice_user") %>"
            Password "<%= scope.lookupvar("wowza::jmxservice_password") %>"
            Collect "garbage_collector"
            Collect "memory"
            Collect "memory_pool"
            Collect "connections"
            Collect "sanjose_connections"
            Collect "smooth_connections"
            Collect "rtmp_connections"
            Collect "rtp_connections"
            Collect "cupertino_connections"
            Collect "ioperformance/input"
            Collect "ioperformance/output"
            Collect "ioperformance/loss"
            Collect "ioperformance-cupertino/input"
            Collect "ioperformance-cupertino/output"
            Collect "ioperformance-cupertino/loss"
            Collect "ioperformance-sanjose/input"
            Collect "ioperformance-sanjose/output"
            Collect "ioperformance-sanjose/loss"
            Collect "ioperformance-smooth/input"
            Collect "ioperformance-smooth/output"
            Collect "ioperformance-smooth/loss"
            Collect "ioperformance-rtmp/input"
            Collect "ioperformance-rtmp/output"
            Collect "ioperformance-rtmp/loss"
            Collect "ioperformance-rtp/input"
            Collect "ioperformance-rtp/output"
            Collect "ioperformance-rtp/loss"
        </Connection>
	</Plugin>
</Plugin>
